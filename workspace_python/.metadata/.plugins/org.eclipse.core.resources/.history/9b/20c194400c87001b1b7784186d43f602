from day06 import MysqlConfig
import requests
from bs4 import BeautifulSoup
from win_unicode_console.runner import get_code
 
response = requests.get('https://www.sedaily.com/Stock/Quote/?mobile')
 
text = response.text


conn = MysqlConfig.conn

soup = BeautifulSoup(text, 'html.parser')
 
for info in soup.select('.tbody'):
    s_name = info.dt.text 
    s_price = info.dd.span.text
    s_code_text = str(info.dd['id'])
    s_code = s_code_text[len(s_code_text)-6:len(s_code_text)]
    print(s_name)
    print(s_price)
    print(s_code)
    
try:
    sql = f"insert into sample(s_name ,s_price ,s_code) values ({col01},{col02},{col03})"
    cur = conn.cursor()
    cur.execute(sql)
    conn.commit()
    print(cur.rowcount)
    
finally:
    cur.close()
    conn.close()
def getPrice(code):
    antCode = get_code(code)